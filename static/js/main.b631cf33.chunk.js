(this.webpackJsonpcomp4462_project=this.webpackJsonpcomp4462_project||[]).push([[0],{233:function(e,t,n){},234:function(e,t,n){},252:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(24),c=n.n(r),d=(n(233),n.p,n(234),n(0));var s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,253)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))},o=n(5),l=n(6),u=n(7),h=n(8),p=n(120),b=n.n(p),g=(n(119),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{})}}]),n}(i.a.Component)),j=g,y=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{})}}]),n}(i.a.Component),m=y,x=n(3),O=n(18),v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).drawLegend=function(e,t){var n=O.a.arcmapLegend();n.scale(e).size(160).x(0).y(0).vtitle("Intensity Reported").utitle("Uncertainty"),x.g("#vsupLegend").selectAll("svg").remove(),x.g("#vsupLegend").append("svg").attr("width",300).attr("height",300).append("g").attr("transform","translate(15,40)").append("g").call(n);var a=O.a.simpleLegend();a.scale(t).size(160).x(0).y(0).title("Intensity reported"),x.g("#colorLegend").selectAll("svg").remove(),x.g("#colorLegend").append("svg").attr("width",300).attr("height",50).append("g").attr("transform","translate(15,0)").append("g").call(a)},a.drawHeatmap=function(e,t){x.a("./merge_ui.csv").then((function(t){console.log("rawdata",t);for(var n=Date.parse("2020-04-08 6:00:00"),i=[],r=[],c=function(e){var c=n+18e5*e,d=new Date(c),s=d.getFullYear()+"-"+(d.getMonth()+1).toString().padStart(2,"0")+"-"+d.getDate().toString().padStart(2,"0")+" "+d.getHours().toString().padStart(2,"0")+":"+d.getMinutes().toString().padStart(2,"0")+":"+d.getSeconds().toString().padStart(2,"0");t.filter((function(e){return e.index==s})).forEach((function(e){var t=0,n=0,r=0;-1!=parseFloat(e.medical_i)&&a.state.attribute.medical&&(t+=parseFloat(e.medical_i),n+=parseFloat(e.medical_u),r+=1),-1!=parseFloat(e.power_i)&&a.state.attribute.power&&(t+=parseFloat(e.power_i),n+=parseFloat(e.power_u),r+=1),-1!=parseFloat(e.sewer_and_water_i)&&a.state.attribute.sewer_and_water&&(t+=parseFloat(e.sewer_and_water_i),n+=parseFloat(e.sewer_and_water_u),r+=1),-1!=parseFloat(e.roads_and_bridges_i)&&a.state.attribute.roads_and_bridges&&(t+=parseFloat(e.roads_and_bridges_i),n+=parseFloat(e.roads_and_bridges_u),r+=1),-1!=parseFloat(e.buildings_i)&&a.state.attribute.buildings&&(t+=parseFloat(e.buildings_i),n+=parseFloat(e.buildings_u),r+=1),i.push({time:c,time_string:e.index,location:parseInt(e.location),intensity_total:t/r,uncertainty_total:n/r})})),r.push(s)},d=0;d<20;d++)c(d);console.log("heatdata",i);var s=30,o=10,l=10,u=10,h=1200-s-o,p=1e3-l-u;x.g("#heatmap").selectAll("svg").remove();var b,g=x.g("#heatmap").append("svg").attr("width",h+s+o).attr("height",p+l+u).append("g").attr("transform","translate("+s+","+l+")"),j=x.d().range([0,h]).padding(.1).domain(r),y=Array.from({length:19},(function(e,t){return t+1})).map((function(e){return{location:e,intensity_total:i.filter((function(t){return t.location==e})).reduce((function(e,t){return t.intensity_total>0?e+t.intensity_total:e}),0)}}));console.log("location intensity",y),b=a.state.descend?y.sort((function(e,t){return t.intensity_total-e.intensity_total})).map((function(e){return e.location})):y.sort((function(e,t){return e.intensity_total-t.intensity_total})).map((function(e){return e.location})),console.log("yDomain",b);var m=x.d().range([0,p]).domain(b).padding(.1),O=x.f().interpolator(x.c).domain([1,10]);g.selectAll().data(i).enter().append("rect").attr("x",(function(e){return j(e.time_string)})).attr("y",(function(e){return m(e.location)})).attr("width",j.bandwidth()).attr("height",m.bandwidth()).style("fill",(function(t){return a.state.uncertainty?t.intensity_total>0?e(t.intensity_total,t.uncertainty_total):"white":t.intensity_total>0?O(t.intensity_total):"white"}))})).catch((function(e){console.log("error in loading heatmap csv!")}))},a.handleOrder=function(){console.log("handle order");var e=document.getElementById("descendingRadio").checked;a.setState({descend:e})},a.handleAttribute=function(){console.log("handle attribute");var e=document.getElementById("medicalCheck").checked,t=document.getElementById("powerCheck").checked,n=document.getElementById("roads_and_bridgesCheck").checked,i=document.getElementById("sewer_and_waterCheck").checked,r=document.getElementById("buildingsCheck").checked;a.setState({attribute:{medical:e,power:t,roads_and_bridges:n,sewer_and_water:i,buildings:r}})},a.handleUncertainty=function(){console.log("handle uncertainty");var e=document.getElementById("uncertaintyRadio").checked;a.setState({uncertainty:e})};var i="#b2182b",r="#fee090",c="#abd9e9",d=x.e().domain([0,.5,1]).range([c,r,i]).interpolate(x.b),s=O.b().branching(2).layers(4).valueDomain([1,10]).uncertaintyDomain([0,1]),l=O.c().quantize(s).range(d),u=x.e().domain([1,5,10]).range([c,r,i]).interpolate(x.b);return a.state={start_time:0,end_time:1,descend:!0,attribute:{medical:!0,power:!1,roads_and_bridges:!1,sewer_and_water:!1,buildings:!1},uncertainty:!0,vsupScale:l,colorScale:u},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("HeatMap did mount..."),this.drawHeatmap(this.state.vsupScale,this.state.colorScale),this.drawLegend(this.state.vsupScale,this.state.colorScale)}},{key:"componentDidUpdate",value:function(){console.log("HeatMap did update..."),this.drawHeatmap(this.state.vsupScale,this.state.colorScale)}},{key:"render",value:function(){return Object(d.jsxs)("div",{class:"row",children:[Object(d.jsxs)("div",{class:"col-10",children:[Object(d.jsxs)("p",{children:["start time: ",this.state.start_time]}),Object(d.jsx)("div",{id:"heatmap"})]}),Object(d.jsxs)("div",{class:"col-2",children:[Object(d.jsx)("span",{children:"Sort by:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"radio",name:"orderRadio",id:"ascendingRadio",value:"ascending",onChange:this.handleOrder})," Ascending ",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"radio",name:"orderRadio",id:"descendingRadio",value:"descending",onChange:this.handleOrder})," Descending",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("span",{children:"Selected attribute:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"medicalCheck",value:"medical",onChange:this.handleAttribute})," Medical ",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"powerCheck",value:"power",onChange:this.handleAttribute})," Power",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"roads_and_bridgesCheck",value:"roads_and_bridges",onChange:this.handleAttribute})," Roads and Bridges",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"sewer_and_waterCheck",value:"sewer_and_water",onChange:this.handleAttribute})," Sewer and Water",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"buildingsCheck",value:"buildings",onChange:this.handleAttribute})," Buildings",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"radio",name:"uncertaintyRadio",id:"noUncertaintyRadio",value:"noUncertainty",onChange:this.handleUncertainty})," Damage reported ",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{id:"colorLegend"}),Object(d.jsx)("input",{type:"radio",name:"uncertaintyRadio",id:"uncertaintyRadio",value:"uncertainty",onChange:this.handleUncertainty})," Damage reported + Uncertainty",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{id:"vsupLegend"})]})]})}}]),n}(i.a.Component),_=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){var e=40,t=window,n=t.innerWidth;t.innerHeight;return Object(d.jsx)("div",{children:Object(d.jsxs)(b.a,{className:"layout",layout:[{i:"a",x:0,y:0,w:6,h:9},{i:"b",x:6,y:0,w:6,h:9},{i:"c",x:0,y:9,w:12,h:4},{i:"d",x:0,y:13,w:12,h:4},{i:"e",x:0,y:17,w:12,h:27}],cols:12,rowHeight:e,margin:[5,1],width:n,children:[Object(d.jsx)("div",{children:Object(d.jsxs)("div",{class:"card",style:{height:360},children:[Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"City Map"}),Object(d.jsx)(j,{})]})},"a"),Object(d.jsx)("div",{children:Object(d.jsxs)("div",{class:"card",style:{height:360},children:[Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"Radar Chart"}),Object(d.jsx)(m,{})]})},"b"),Object(d.jsx)("div",{children:Object(d.jsx)("div",{class:"card",style:{height:160},children:Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"# of Reports"})})},"c"),Object(d.jsx)("div",{children:Object(d.jsx)("div",{class:"card",style:{height:160},children:Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"Shaking Intensity"})})},"d"),Object(d.jsx)("div",{children:Object(d.jsxs)("div",{class:"card",style:{height:1080},children:[Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"Heatmap"}),Object(d.jsx)(v,{})]})},"e")]})})}}]),n}(i.a.Component);c.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(_,{})}),document.getElementById("root")),s()}},[[252,1,2]]]);
//# sourceMappingURL=main.b631cf33.chunk.js.map