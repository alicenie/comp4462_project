(this.webpackJsonpcomp4462_project=this.webpackJsonpcomp4462_project||[]).push([[0],{232:function(t,e,n){},233:function(t,e,n){},251:function(t,e,n){"use strict";n.r(e);var a=n(1),i=n.n(a),r=n(23),c=n.n(r),d=(n(232),n.p,n(233),n(0));var o=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,252)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),r(t),c(t)}))},s=n(5),l=n(6),u=n(7),p=n(8),h=n(120),b=n.n(h),g=(n(119),function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{})}}]),n}(i.a.Component)),j=g,y=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{})}}]),n}(i.a.Component),x=y,m=n(3),v=n(26),O=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){var a;Object(s.a)(this,n),(a=e.call(this,t)).drawLegend=function(t,e){var n=v.a.arcmapLegend();n.scale(t).size(160).x(0).y(0).vtitle("Intensity Reported").utitle("Uncertainty"),m.i("#vsupLegend").selectAll("svg").remove(),m.i("#vsupLegend").append("svg").attr("width",300).attr("height",300).append("g").attr("transform","translate(15,40)").append("g").call(n),m.i("#colorLegend").selectAll("svg").remove();var a=m.i("#colorLegend").append("svg").attr("width",180).attr("height",60).append("g"),i=a.append("defs").append("linearGradient").attr("id","linear-gradient");i.attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%"),i.append("stop").attr("offset","0%").attr("stop-color",e(1)),i.append("stop").attr("offset","50%").attr("stop-color",e(5)),i.append("stop").attr("offset","100%").attr("stop-color",e(10)),a.append("rect").attr("width",160).attr("height",20).style("fill","url(#linear-gradient)").attr("x",10).attr("y",10),a.append("text").text("1").attr("x",10).attr("y",45),a.append("text").text("10").attr("x",160).attr("y",45)},a.drawHeatmap=function(t,e){m.c("./merge_ui.csv").then((function(n){console.log("rawdata",n);for(var i=Date.parse("2020-04-08 6:00:00"),r=[],c=[],d=function(t){var e=i+18e5*t,d=new Date(e),o=d.getFullYear()+"-"+(d.getMonth()+1).toString().padStart(2,"0")+"-"+d.getDate().toString().padStart(2,"0")+" "+d.getHours().toString().padStart(2,"0")+":"+d.getMinutes().toString().padStart(2,"0")+":"+d.getSeconds().toString().padStart(2,"0"),s=(d.getMonth()+1).toString()+"."+d.getDate()+" "+d.getHours()+":"+d.getMinutes().toString().padStart(2,"0");n.filter((function(t){return t.index==o})).forEach((function(t){var n=0,i=0,c=0;-1!=parseFloat(t.medical_i)&&a.state.attribute.medical&&(n+=parseFloat(t.medical_i),i+=parseFloat(t.medical_u),c+=1),-1!=parseFloat(t.power_i)&&a.state.attribute.power&&(n+=parseFloat(t.power_i),i+=parseFloat(t.power_u),c+=1),-1!=parseFloat(t.sewer_and_water_i)&&a.state.attribute.sewer_and_water&&(n+=parseFloat(t.sewer_and_water_i),i+=parseFloat(t.sewer_and_water_u),c+=1),-1!=parseFloat(t.roads_and_bridges_i)&&a.state.attribute.roads_and_bridges&&(n+=parseFloat(t.roads_and_bridges_i),i+=parseFloat(t.roads_and_bridges_u),c+=1),-1!=parseFloat(t.buildings_i)&&a.state.attribute.buildings&&(n+=parseFloat(t.buildings_i),i+=parseFloat(t.buildings_u),c+=1),r.push({time:e,time_string:s,location:parseInt(t.location),intensity_total:n/c,uncertainty_total:i/c})})),c.push(s)},o=0;o<20;o++)d(o);console.log("heatdata",r);var s=30,l=10,u=30,p=10,h=1200-s-l,b=1e3-u-p;m.i("#heatmap").selectAll("svg").remove();var g=m.i("#heatmap").append("svg").attr("width",h+s+l).attr("height",b+u+p).append("g").attr("transform","translate("+s+","+u+")"),j=m.f().range([0,h]).padding(.1).domain(c);g.append("g").style("font-size","12px").call(m.b(j)).call((function(t){t.select(".domain").remove(),t.selectAll("line").remove()}));var y,x=Array.from({length:19},(function(t,e){return e+1})).map((function(t){return{location:t,intensity_total:r.filter((function(e){return e.location==t})).reduce((function(t,e){return e.intensity_total>0?t+e.intensity_total:t}),0)}}));console.log("location intensity",x),y=a.state.descend?x.sort((function(t,e){return e.intensity_total-t.intensity_total})).map((function(t){return t.location})):x.sort((function(t,e){return t.intensity_total-e.intensity_total})).map((function(t){return t.location})),console.log("yDomain",y);var v=m.f().range([0,b]).domain(y).padding(.1);g.append("g").style("font-size","14px").call(m.a(v)).call((function(t){t.select(".domain").remove(),t.selectAll("line").remove()})),g.selectAll().data(r).enter().append("rect").attr("x",(function(t){return j(t.time_string)})).attr("y",(function(t){return v(t.location)})).attr("width",j.bandwidth()).attr("height",v.bandwidth()).style("fill",(function(n){return a.state.uncertainty?n.intensity_total>0?t(n.intensity_total,n.uncertainty_total):"white":n.intensity_total>0?e(n.intensity_total):"white"}))})).catch((function(t){console.log("error in loading heatmap csv!")}))},a.handleOrder=function(){console.log("handle order");var t=document.getElementById("descendingRadio").checked;a.setState({descend:t})},a.handleAttribute=function(){console.log("handle attribute");var t=document.getElementById("medicalCheck").checked,e=document.getElementById("powerCheck").checked,n=document.getElementById("roads_and_bridgesCheck").checked,i=document.getElementById("sewer_and_waterCheck").checked,r=document.getElementById("buildingsCheck").checked;a.setState({attribute:{medical:t,power:e,roads_and_bridges:n,sewer_and_water:i,buildings:r}})},a.handleUncertainty=function(){console.log("handle uncertainty");var t=document.getElementById("uncertaintyRadio").checked;a.setState({uncertainty:t})};var i=m.g().domain([0,.5,1]).range(["#abd9e9","#fee090","#b2182b"]).interpolate(m.d),r=v.b().branching(2).layers(4).valueDomain([1,10]).uncertaintyDomain([0,1]),c=v.c().quantize(r).range(i),d=m.h().interpolator(m.e).domain([10,-5]);return a.state={start_time:0,end_time:1,descend:!0,attribute:{medical:!0,power:!1,roads_and_bridges:!1,sewer_and_water:!1,buildings:!1},uncertainty:!0,vsupScale:c,colorScale:d},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){console.log("HeatMap did mount..."),this.drawHeatmap(this.state.vsupScale,this.state.colorScale),this.drawLegend(this.state.vsupScale,this.state.colorScale)}},{key:"componentDidUpdate",value:function(){console.log("HeatMap did update..."),this.drawHeatmap(this.state.vsupScale,this.state.colorScale)}},{key:"render",value:function(){return Object(d.jsxs)("div",{class:"row",children:[Object(d.jsxs)("div",{class:"col-10",children:[Object(d.jsxs)("p",{children:["start time: ",this.state.start_time]}),Object(d.jsx)("div",{id:"heatmap"})]}),Object(d.jsxs)("div",{class:"col-2",children:[Object(d.jsx)("span",{children:"Sort by:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"radio",name:"orderRadio",id:"ascendingRadio",value:"ascending",onChange:this.handleOrder})," Ascending ",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"radio",name:"orderRadio",id:"descendingRadio",value:"descending",onChange:this.handleOrder})," Descending",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("span",{children:"Selected attribute:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"medicalCheck",value:"medical",onChange:this.handleAttribute})," Medical ",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"powerCheck",value:"power",onChange:this.handleAttribute})," Power",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"roads_and_bridgesCheck",value:"roads_and_bridges",onChange:this.handleAttribute})," Roads and Bridges",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"sewer_and_waterCheck",value:"sewer_and_water",onChange:this.handleAttribute})," Sewer and Water",Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"checkbox",id:"buildingsCheck",value:"buildings",onChange:this.handleAttribute})," Buildings",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("span",{children:"w/o uncertainty:"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"radio",name:"uncertaintyRadio",id:"noUncertaintyRadio",value:"noUncertainty",onChange:this.handleUncertainty})," Damage reported ",Object(d.jsx)("br",{}),Object(d.jsx)("div",{id:"colorLegend"}),Object(d.jsx)("input",{type:"radio",name:"uncertaintyRadio",id:"uncertaintyRadio",value:"uncertainty",onChange:this.handleUncertainty})," Damage reported + Uncertainty",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{id:"vsupLegend"})]})]})}}]),n}(i.a.Component),f=function(t){Object(u.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(s.a)(this,n),e.call(this,t)}return Object(l.a)(n,[{key:"render",value:function(){var t=40,e=window,n=e.innerWidth;e.innerHeight;return Object(d.jsx)("div",{children:Object(d.jsxs)(b.a,{className:"layout",layout:[{i:"a",x:0,y:0,w:6,h:9},{i:"b",x:6,y:0,w:6,h:9},{i:"c",x:0,y:9,w:12,h:4},{i:"d",x:0,y:13,w:12,h:4},{i:"e",x:0,y:17,w:12,h:27}],cols:12,rowHeight:t,margin:[5,1],width:n,children:[Object(d.jsx)("div",{children:Object(d.jsxs)("div",{class:"card",style:{height:360},children:[Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"City Map"}),Object(d.jsx)(j,{})]})},"a"),Object(d.jsx)("div",{children:Object(d.jsxs)("div",{class:"card",style:{height:360},children:[Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"Radar Chart"}),Object(d.jsx)(x,{})]})},"b"),Object(d.jsx)("div",{children:Object(d.jsx)("div",{class:"card",style:{height:160},children:Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"# of Reports"})})},"c"),Object(d.jsx)("div",{children:Object(d.jsx)("div",{class:"card",style:{height:160},children:Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"Shaking Intensity"})})},"d"),Object(d.jsx)("div",{children:Object(d.jsxs)("div",{class:"card",style:{height:1080},children:[Object(d.jsx)("p",{style:{backgroundColor:"#e9ecef",margin:"5px",paddingLeft:"5px"},children:"Heatmap"}),Object(d.jsx)(O,{})]})},"e")]})})}}]),n}(i.a.Component);c.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root")),o()}},[[251,1,2]]]);
//# sourceMappingURL=main.47d24945.chunk.js.map